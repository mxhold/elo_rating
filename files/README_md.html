<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>README.md</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>README.md</h1>
        <div class='paths'>
          README.md
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>2014-06-29 16:18:29 -0400</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <h1 id="label-elo_rating">elo_rating<span><a href="#label-elo_rating">&para;</a> <a href="#documentation">&uarr;</a></span></h1>
            
            <p><code>elo_rating</code> helps you calculate <a
            href="https://en.wikipedia.org/wiki/Elo_rating_system">Elo ratings</a>, a
            rating system used primary for Chess, but can be used anywhere you want to
            determine an absolute ordering of things by doing many comparisons of a
            small number of things.</p>
            
            <p>It can handle multiple players in one game and allows for custom K-factor
            functions.</p>
            <ul><li>
            <p><a href="https://mxhold.github.io/elo_rating/doc/">API Documentation</a></p>
            </li></ul>
            
            <h2 id="label-Getting+started">Getting started<span><a href="#label-Getting+started">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
            
            <pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">elo_rating</span></pre>
            
            <p>or add it to your Gemfile and run <code>bundle</code>:</p>
            
            <pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;elo_rating&#39;</span></pre>
            
            <h2 id="label-Usage">Usage<span><a href="#label-Usage">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
            
            <p>Say you have two players playing against each other in a match, both with
            initial ratings of 2000.</p>
            
            <p>The second player wins.</p>
            
            <p>To determine both player&#39;s updated ratings:</p>
            
            <pre class="ruby"><span class="ruby-identifier">match</span> = <span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>, <span class="ruby-identifier">winner</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">updated_ratings</span> <span class="ruby-comment"># =&gt; [1988, 2012]</span></pre>
            
            <p>This tells us that the first player&#39;s rating should go down 12 points
            and the second player&#39;s should go up 12 points.</p>
            
            <p>You can chain the same function calls to achieve the same result:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>).<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>, <span class="ruby-identifier">winner</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">updated_ratings</span> <span class="ruby-comment"># =&gt; [1988, 2012]</span></pre>
            
            <h3 id="label-%3E2+players">&gt;2 players<span><a href="#label-%3E2+players">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
            
            <p>Most Elo rating calculators only allow for matches of just 2 players, but
            the formula can be extended to games of any number of players.</p>
            
            <p>We can do this by combining the rating adjustments for each pairing of
            players into one big adjustment.</p>
            
            <p>Say you have three players, rated 1900, 2000, and 2000. They are playing a
            game like <a
            href="https://en.wikipedia.org/wiki/Monopoly_(game)">Monopoly</a> where
            there is only one winner. The third player wins. To determine their new
            scores:</p>
            
            <pre class="ruby"><span class="ruby-identifier">match</span> = <span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">1900</span>, <span class="ruby-identifier">winner</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">updated_ratings</span> <span class="ruby-comment"># =&gt; [1931, 1985, 1985]</span></pre>
            
            <p>This is calculated as if the first player beat both of the other players
            and the other two players tied.</p>
            
            <h3 id="label-Ranked+games">Ranked games<span><a href="#label-Ranked+games">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
            
            <p>Some games like <a href="https://en.wikipedia.org/wiki/Mario_Kart">Mario
            Kart</a> have multiple, ranked winners.</p>
            
            <p>Let&#39;s say you have three players like before, rated 1900, 2000, and
            2000, who came in first place, second place, and third place respectively.</p>
            
            <p>Instead of indicating the winner, you can specify their places:</p>
            
            <pre class="ruby"><span class="ruby-identifier">match</span> = <span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">1900</span>, <span class="ruby-identifier">place</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>, <span class="ruby-identifier">place</span><span class="ruby-operator">:</span> <span class="ruby-value">2</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>, <span class="ruby-identifier">place</span><span class="ruby-operator">:</span> <span class="ruby-value">3</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">updated_ratings</span> <span class="ruby-comment"># =&gt; [1931, 1997, 1973]</span></pre>
            
            <p>This is calculated as if the first player beat both of the other players
            and the second player beat the third.</p>
            
            <h2 id="label-Elo+rating+functions">Elo rating functions<span><a href="#label-Elo+rating+functions">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
            
            <p>The functions used in the above calculations are available for use
            directly:</p>
            
            <h3 id="label-Expected+score">Expected score<span><a href="#label-Expected+score">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
            
            <p>Say you have 2 players, rated 1900 and 2000.</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span>.<span class="ruby-identifier">expected_score</span>(<span class="ruby-value">1900</span>, <span class="ruby-value">2000</span>) <span class="ruby-comment"># =&gt; 0.360</span></pre>
            
            <p>The player rated 1900 has a 36% chance of winning.</p>
            
            <h3 id="label-Rating+adjustment">Rating adjustment<span><a href="#label-Rating+adjustment">&para;</a> <a href="#documentation">&uarr;</a></span></h3>
            
            <p>You can use the expected score and the results of an actual match to
            determine how an Elo rating should change.</p>
            
            <p>The <code>EloRating.rating_adjustment</code> function takes an expected
            score and an actual score and returns how much a rating should go up or
            down.</p>
            
            <p>Let&#39;s say we have the expected rating from above of 0.36 and the first
            player rated 1900 won the match, making their actual score 1.</p>
            
            <p>We can use this to determine how much their rating should change:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span>.<span class="ruby-identifier">rating_adjustment</span>(<span class="ruby-value">0.36</span>, <span class="ruby-value">1</span>) <span class="ruby-comment"># =&gt; 15.36</span></pre>
            
            <p>This means their rating should now be 1915.</p>
            
            <h2 id="label-K-factor">K-factor<span><a href="#label-K-factor">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
            
            <p>The K-factor is used in calculating the rating adjustment and determines
            how much impact the most recent game has on a player&#39;s rating.</p>
            
            <p>It defaults to 24:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-identifier">k_factor</span> <span class="ruby-comment"># =&gt; 24</span></pre>
            
            <p>You can change this to any number. With a lower K-factor, ratings are less
            volatile and change slower. Compare:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-identifier">k_factor</span> = <span class="ruby-value">10</span>&#x000A;<span class="ruby-identifier">match</span> = <span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>, <span class="ruby-identifier">winner</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">updated_ratings</span> <span class="ruby-comment"># =&gt; [2005, 1995]</span></pre>
            
            <p>to:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-identifier">k_factor</span> = <span class="ruby-value">20</span>&#x000A;<span class="ruby-identifier">match</span> = <span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>, <span class="ruby-identifier">winner</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">add_player</span>(<span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2000</span>)&#x000A;<span class="ruby-identifier">match</span>.<span class="ruby-identifier">updated_ratings</span> <span class="ruby-comment"># =&gt; [2010, 1990]</span></pre>
            
            <p>You can also pass a block to provide a custom function to calculate the
            K-factor based on the player&#39;s rating:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-identifier">set_k_factor</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rating</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">rating</span> <span class="ruby-operator">||=</span> <span class="ruby-value">2000</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rating</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2100</span>&#x000A;    <span class="ruby-value">32</span>&#x000A;  <span class="ruby-keyword">elsif</span> <span class="ruby-value">2100</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">rating</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rating</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">2400</span>&#x000A;    <span class="ruby-value">24</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-value">16</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
            
            <p>Then you can provide a rating to <code>EloRating.rating_adjustment</code>
            that will be used in your custom K-factor function:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span>.<span class="ruby-identifier">rating_adjustment</span>(<span class="ruby-value">0.75</span>, <span class="ruby-value">0</span>) <span class="ruby-comment"># =&gt; -24.0</span>&#x000A;<span class="ruby-constant">EloRating</span>.<span class="ruby-identifier">rating_adjustment</span>(<span class="ruby-value">0.75</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2200</span>) <span class="ruby-comment"># =&gt; -18.0</span>&#x000A;<span class="ruby-constant">EloRating</span>.<span class="ruby-identifier">rating_adjustment</span>(<span class="ruby-value">0.75</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">rating</span><span class="ruby-operator">:</span> <span class="ruby-value">2500</span>) <span class="ruby-comment"># =&gt; -12.0</span></pre>
            
            <p>You can also just specify a K-factor directly for a single rating
            adjustment:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span>.<span class="ruby-identifier">rating_adjustment</span>(<span class="ruby-value">0.75</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">k_factor</span><span class="ruby-operator">:</span> <span class="ruby-value">24</span>) <span class="ruby-comment"># =&gt; -18.0</span></pre>
            
            <p><em>Note</em>: custom K-factor functions must not raise any exceptions when
            the rating is nil:</p>
            
            <pre class="ruby"><span class="ruby-constant">EloRating</span><span class="ruby-operator">::</span><span class="ruby-identifier">set_k_factor</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">rating</span><span class="ruby-operator">|</span>&#x000A;  <span class="ruby-identifier">rating</span> <span class="ruby-operator">/</span> <span class="ruby-value">100</span>&#x000A;<span class="ruby-keyword">end</span>&#x000A;<span class="ruby-comment"># =&gt; ArgumentError: Error encountered in K-factor block when passed nil rating: undefined method `/&#39; for nil:NilClass</span></pre>
            
            <h2 id="label-Thanks">Thanks<span><a href="#label-Thanks">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
            
            <p>Thanks to:</p>
            <ul><li>
            <p>Divergent Informatics for their <a
            href="http://elo.divergentinformatics.com/">multiplayer Elo calculator</a>
            used to verify calculations used in the development of this gem</p>
            </li><li>
            <p><a href="https://github.com/iain">Ian Hecker</a> for the original <a
            href="https://github.com/iain/elo">Elo</a> gem.</p>
            </li></ul>
            
            <h2 id="label-License">License<span><a href="#label-License">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
            
            <p>Copyright © 2014 Maxwell Holder.</p>
            
            <p>It is free software, and may be redistributed under the terms specified in
            the <a href="LICENSE.html">LICENSE</a> file.</p>
          </div>
          <div id='context'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
